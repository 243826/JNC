                           INM Introductory Example
                           ========================

1. Purpose
==========

This example demonstrates a simple application using INM fetch, update and
revert a configuration of a NETCONF capable device.

2. Topology
===========

This example uses two nodes as follows:

  * Our INM application.

  * A NETCONF capable device, in this particular example, we assume that
    Tail-f ConfD is used, but in fact any NETCONF enabled device would do.

For the sake of simplicity, the following simplification has been made:

Both nodes run on the same computer and communicates over th. loopback
interface (i.e. remote host is set to "localhost" on both nodes). In a real
life situation, they would normally run on different computers. If your ConfD
node runs on a different machine than INM, there are a couple of additional
steps to take, please see section 5 below.

3. Prerequisites
================

In order to run this demonstration, you need the following:

  * One computer with Linux operating system installed.
  * Tools to build C programs, e.g. gcc, make.
  * Java version 1.4 or later.
  * ant program.

4. Building and Running the INM Introduction Example
=====================================================

4.1 Building and Starting ConfD
===============================

Open a shell and set your current working directory to the directory where
your installation of ConfD resides:

  # cd <your confd installation dir>

Source the rc script in the ConfD root directory:

  # source <confd_dir>/confdrc

        or if you are using the tcsh:

  # source <confd_dir>/confdrc.tcsh

Source the script in the ConfM root directory
  # cd <your confm installation dir>
  # source ./confmrc

This sets environment variable CONFM_DIR to where
ConfM was installed. This is used by the ant build.xml to
find the ConfM jar files.

Then change directory 

  # cd ${CONFM_DIR}/examples/inm_intro

Build the ConfD node and start it:

  # cd confd
  # make clean all start
  # cd ..

4.2 Building INM example
========================

Set your current working directory to the directory where
this INM example resides:

  # cd ${CONFM_DIR}/examples/inm_intro

Build the INM example:

  # ant clean compile

4.3 Fetch Current Configuration
===============================

This example fetches the current configuration of ConfD.

Run this example by doing:

  # ant GetConfig

The configuration sent from ConfD is printed.

4.4 Update Configuration
=============================

This example makes an update of the current configuration of ConfD. We extract
a part of the configuration, modify it and send it back to ConfD.

Run this example by doing:

  # ant UpdateConfig

4.5 Revert Configuration
========================

This example reverts the update made in the Update example above.

Run this example by doing:

  # ant RevertConfig

4.6 Stopping ConfD
===============================

After completing the examples above, stop ConfD as follows:

  # cd confd
  # make stop
  # cd ..

5. ConfD and INM on different hosts. 
=====================================

You can also run the example above having ConfD and INM on separate
machines. If so, the following additional steps has to be made:
This is the required procedure for users using the win32 version of 
ConfM.

5.1 Building and Starting ConfD
===============================

On the machine where ConfD is installed, execute the steps above
that start ConfD

On the machine where ConfM runs, execute the ant script.

5.2. Building and Running the INM examples
==========================================

The INM example assumes that the ConfD server is running on the same
machine. Edit the three files that constitutes the example:

 * GetConfig.java
 * UpdateConfig.java
 * RevertConfig.java

Each of them has one occurence of the following line:

  SSHConnection c = new SSHConnection("localhost", 2022);

Replace the string "localhost" with the IP address or host name of your ConfD
server, e.g.:

  SSHConnection c = new SSHConnection("mydevice", 2022);

or

  SSHConnection c = new SSHConnection("192.168.1.1", 2022);

Then rerun the ant script.
